@model CommunityPortal.Models.Profile.HomeownerProfileViewModel
@using Microsoft.AspNetCore.Identity
@inject UserManager<ApplicationUser> UserManager

@{
    ViewData["Title"] = "Homeowner Profile";
    var canEdit = (User.IsInRole("admin") || Model.User.Id == UserManager.GetUserId(User));
}

<h2>@ViewData["Title"]</h2>

<div class="card shadow p-4">
    <div class="mb-4 text-center">
        @if (!string.IsNullOrEmpty(Model.User.ProfileImagePath))
        {
            <img src="~/@Model.User.ProfileImagePath" alt="Profile Image" class="rounded-circle" width="150" height="150" />
        }
        else
        {
            <img src="~/images/default-profile.jpg" alt="Default Profile Image" class="rounded-circle" width="150" height="150" />
        }
    </div>

    <h4>Contact Information</h4>
    <p><strong>Email:</strong> @Model.User.Email</p>
    <p><strong>Phone Number:</strong> @(string.IsNullOrEmpty(Model.User.PhoneNumber) ? "N/A" : Model.User.PhoneNumber)</p>

    <h4>Profile Details</h4>
    <p><strong>First Name:</strong> @Model.FirstName</p>
    <p><strong>Last Name:</strong> @Model.LastName</p>
    <p><strong>Block No.:</strong> @Model.BlockNumber</p>
    <p><strong>House No.:</strong> @Model.HouseNumber</p>
    <p><strong>Address:</strong> @Model.Address</p>
    <p><strong>Move In Date:</strong> @Model.MoveInDate.ToShortDateString()</p>
    <p><strong>Type of Residency:</strong> @Model.TypeOfResidency</p>

    @if (canEdit)
    {
        <a asp-action="Edit" asp-route-userId="@Model.User.Id" class="btn btn-primary mt-3">Edit Profile</a>
    }
</div>